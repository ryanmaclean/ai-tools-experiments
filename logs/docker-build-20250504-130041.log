#0 building with "desktop-linux" instance using docker driver

#1 [dev internal] load build definition from Dockerfile.dev
#1 transferring dockerfile: 1.66kB done
#1 DONE 0.0s

#2 [prod internal] load build definition from Dockerfile
#2 transferring dockerfile: 472B done
#2 DONE 0.0s

#3 [prod internal] load metadata for docker.io/library/node:18-alpine
#3 ...

#4 [dev auth] library/node:pull token for registry-1.docker.io
#4 DONE 0.0s

#3 [prod internal] load metadata for docker.io/library/node:18-alpine
#3 DONE 0.8s

#5 [dev internal] load .dockerignore
#5 transferring context: 636B done
#5 DONE 0.0s

#6 [prod internal] load .dockerignore
#6 transferring context: 636B done
#6 DONE 0.0s

#7 [prod 1/5] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#7 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e done
#7 CACHED

#8 [dev internal] load build context
#8 transferring context: 515.95kB 0.7s done
#8 DONE 0.7s

#9 [prod internal] load build context
#9 transferring context: 246.03MB 2.3s done
#9 DONE 2.3s

#10 [prod 2/6] WORKDIR /app
#10 CACHED

#11 [dev 2/5] RUN apk add --no-cache python3 make g++ pixman-dev cairo-dev pango-dev jpeg-dev giflib-dev librsvg-dev     chromium nss freetype harfbuzz ca-certificates ttf-freefont
#11 0.180 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/aarch64/APKINDEX.tar.gz
#11 0.471 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/aarch64/APKINDEX.tar.gz
#11 0.861 (1/281) Installing ca-certificates (20241121-r1)
#11 0.918 (2/281) Installing cairo-tools (1.18.2-r1)
#11 0.929 (3/281) Installing libexpat (2.7.0-r0)
#11 0.941 (4/281) Installing brotli-libs (1.1.0-r2)
#11 0.961 (5/281) Installing libbz2 (1.0.8-r6)
#11 0.971 (6/281) Installing libpng (1.6.47-r0)
#11 0.983 (7/281) Installing freetype (2.13.3-r0)
#11 1.005 (8/281) Installing fontconfig (2.15.0-r1)
#11 1.032 (9/281) Installing expat (2.7.0-r0)
#11 1.046 (10/281) Installing pkgconf (2.3.0-r0)
#11 1.054 (11/281) Installing expat-dev (2.7.0-r0)
#11 1.062 (12/281) Installing bzip2-dev (1.0.8-r6)
#11 1.070 (13/281) Installing brotli (1.1.0-r2)
#11 1.079 (14/281) Installing brotli-dev (1.1.0-r2)
#11 1.087 (15/281) Installing zlib-dev (1.3.1-r2)
#11 1.096 (16/281) Installing libpng-dev (1.6.47-r0)
#11 1.111 (17/281) Installing freetype-dev (2.13.3-r0)
#11 1.127 (18/281) Installing fontconfig-dev (2.15.0-r1)
#11 1.137 (19/281) Installing libxau (1.0.11-r4)
#11 1.145 (20/281) Installing xorgproto (2024.1-r0)
#11 1.171 (21/281) Installing libxau-dev (1.0.11-r4)
#11 1.180 (22/281) Installing libmd (1.1.0-r0)
#11 1.189 (23/281) Installing libbsd (0.12.2-r0)
#11 1.215 (24/281) Installing libxdmcp (1.1.5-r1)
#11 1.223 (25/281) Installing libxcb (1.16.1-r0)
#11 1.243 (26/281) Installing libx11 (1.8.10-r0)
#11 1.300 (27/281) Installing libxext (1.3.6-r2)
#11 1.310 (28/281) Installing libffi (3.4.7-r0)
#11 1.318 (29/281) Installing gdbm (1.24-r0)
#11 1.326 (30/281) Installing xz-libs (5.6.3-r1)
#11 1.337 (31/281) Installing mpdecimal (4.0.0-r0)
#11 1.349 (32/281) Installing ncurses-terminfo-base (6.5_p20241006-r3)
#11 1.359 (33/281) Installing libncursesw (6.5_p20241006-r3)
#11 1.375 (34/281) Installing libpanelw (6.5_p20241006-r3)
#11 1.387 (35/281) Installing readline (8.2.13-r0)
#11 1.400 (36/281) Installing sqlite-libs (3.48.0-r1)
#11 1.450 (37/281) Installing python3 (3.12.10-r0)
#11 1.952 (38/281) Installing python3-pycache-pyc0 (3.12.10-r0)
#11 2.522 (39/281) Installing pyc (3.12.10-r0)
#11 2.522 (40/281) Installing xcb-proto-pyc (1.17.0-r0)
#11 ...

#12 [prod 3/6] COPY package*.json ./
#12 DONE 0.2s

#11 [dev 2/5] RUN apk add --no-cache python3 make g++ pixman-dev cairo-dev pango-dev jpeg-dev giflib-dev librsvg-dev     chromium nss freetype harfbuzz ca-certificates ttf-freefont
#11 2.551 (41/281) Installing python3-pyc (3.12.10-r0)
#11 2.551 (42/281) Installing xcb-proto (1.17.0-r0)
#11 2.585 (43/281) Installing libxdmcp-dev (1.1.5-r1)
#11 2.593 (44/281) Installing libxcb-dev (1.16.1-r0)
#11 2.647 (45/281) Installing xtrans (1.5.2-r0)
#11 2.665 (46/281) Installing libx11-dev (1.8.10-r0)
#11 2.688 (47/281) Installing libxext-dev (1.3.6-r2)
#11 2.698 (48/281) Installing libxrender (0.9.11-r5)
#11 2.707 (49/281) Installing libxrender-dev (0.9.11-r5)
#11 2.720 (50/281) Installing pixman (0.43.4-r1)
#11 2.781 (51/281) Installing pixman-dev (0.43.4-r1)
#11 2.791 (52/281) Installing util-macros (1.20.1-r0)
#11 2.804 (53/281) Installing xcb-util (0.4.1-r3)
#11 2.813 (54/281) Installing xcb-util-dev (0.4.1-r3)
#11 2.821 (55/281) Installing cairo (1.18.2-r1)
#11 2.963 (56/281) Installing libintl (0.22.5-r0)
#11 2.975 (57/281) Installing libeconf (0.6.3-r0)
#11 2.985 (58/281) Installing libblkid (2.40.4-r1)
#11 3.006 (59/281) Installing libmount (2.40.4-r1)
#11 3.032 (60/281) Installing pcre2 (10.43-r0)
#11 3.242 (61/281) Installing glib (2.82.5-r0)
#11 3.546 (62/281) Installing cairo-gobject (1.18.2-r1)
#11 3.559 (63/281) Installing libxml2 (2.13.4-r5)
#11 3.628 (64/281) Installing libxml2-utils (2.13.4-r5)
#11 3.638 (65/281) Installing docbook-xml (4.5-r9)
#11 3.710 Executing docbook-xml-4.5-r9.post-install
#11 3.718 (66/281) Installing libgpg-error (1.51-r0)
#11 3.758 (67/281) Installing libgcrypt (1.10.3-r1)
#11 3.824 (68/281) Installing libxslt (1.1.42-r2)
#11 3.849 (69/281) Installing docbook-xsl-ns (1.79.2-r11)
#11 4.130 Executing docbook-xsl-ns-1.79.2-r11.post-install
#11 4.144 (70/281) Installing docbook-xsl-nons (1.79.2-r11)
#11 4.381 Executing docbook-xsl-nons-1.79.2-r11.post-install
#11 4.393 (71/281) Installing docbook-xsl (1.79.2-r11)
#11 4.419 (72/281) Installing xz (5.6.3-r1)
#11 4.431 (73/281) Installing gettext-asprintf (0.22.5-r0)
#11 4.439 (74/281) Installing libunistring (1.2-r0)
#11 4.540 (75/281) Installing gettext-libs (0.22.5-r0)
#11 4.679 (76/281) Installing gettext-envsubst (0.22.5-r0)
#11 4.707 (77/281) Installing libgomp (14.2.0-r4)
#11 4.827 (78/281) Installing gettext (0.22.5-r0)
#11 5.003 (79/281) Installing gettext-dev (0.22.5-r0)
#11 5.343 (80/281) Installing py3-parsing (3.1.4-r0)
#11 5.392 (81/281) Installing py3-parsing-pyc (3.1.4-r0)
#11 5.452 (82/281) Installing py3-packaging (24.2-r0)
#11 5.474 (83/281) Installing py3-packaging-pyc (24.2-r0)
#11 5.553 (84/281) Installing linux-headers (6.6-r1)
#11 6.039 (85/281) Installing libffi-dev (3.4.7-r0)
#11 6.081 (86/281) Installing bsd-compat-headers (0.7.2-r6)
#11 6.098 (87/281) Installing libformw (6.5_p20241006-r3)
#11 6.115 (88/281) Installing libmenuw (6.5_p20241006-r3)
#11 6.126 (89/281) Installing libncurses++ (6.5_p20241006-r3)
#11 6.139 (90/281) Installing ncurses-dev (6.5_p20241006-r3)
#11 6.169 (91/281) Installing libedit (20240808.3.1-r0)
#11 6.201 (92/281) Installing libedit-dev (20240808.3.1-r0)
#11 6.210 (93/281) Installing libpcre2-16 (10.43-r0)
#11 6.318 (94/281) Installing libpcre2-32 (10.43-r0)
#11 6.386 (95/281) Installing pcre2-dev (10.43-r0)
#11 6.549 (96/281) Installing libuuid (2.40.4-r1)
#11 6.569 (97/281) Installing libfdisk (2.40.4-r1)
#11 6.600 (98/281) Installing liblastlog2 (2.40.4-r1)
#11 6.616 (99/281) Installing libsmartcols (2.40.4-r1)
#11 6.640 (100/281) Installing sqlite (3.48.0-r1)
#11 6.842 (101/281) Installing sqlite-dev (3.48.0-r1)
#11 6.871 (102/281) Installing util-linux-dev (2.40.4-r1)
#11 6.882 (103/281) Installing glib-dev (2.82.5-r0)
#11 7.195 (104/281) Installing cairo-dev (1.18.2-r1)
#11 7.206 (105/281) Installing libfontenc (1.1.8-r0)
#11 7.216 (106/281) Installing mkfontscale (1.2.3-r1)
#11 7.226 (107/281) Installing font-opensans (0_git20210927-r1)
#11 7.483 (108/281) Installing shared-mime-info (2.4-r2)
#11 7.658 (109/281) Installing hicolor-icon-theme (0.18-r0)
#11 7.722 (110/281) Installing libjpeg-turbo (3.0.4-r0)
#11 7.813 (111/281) Installing libsharpyuv (1.4.0-r0)
#11 7.828 (112/281) Installing libwebp (1.4.0-r0)
#11 8.305 (113/281) Installing zstd-libs (1.5.6-r2)
#11 8.748 (114/281) Installing tiff (4.7.0-r0)
#11 8.909 (115/281) Installing gdk-pixbuf (2.42.12-r1)
#11 9.035 (116/281) Installing gtk-update-icon-cache (3.24.49-r0)
#11 9.049 (117/281) Installing libxcomposite (0.4.6-r5)
#11 9.058 (118/281) Installing libxfixes (6.0.1-r4)
#11 9.067 (119/281) Installing libxcursor (1.2.3-r0)
#11 9.083 (120/281) Installing libxdamage (1.1.6-r5)
#11 9.105 (121/281) Installing libxi (1.8.2-r0)
#11 9.120 (122/281) Installing libxinerama (1.1.5-r4)
#11 9.229 (123/281) Installing libxrandr (1.5.4-r1)
#11 9.273 (124/281) Installing libatk-1.0 (2.54.1-r0)
#11 9.439 (125/281) Installing libxtst (1.2.5-r0)
#11 9.491 (126/281) Installing dbus-libs (1.14.10-r4)
#11 9.610 (127/281) Installing at-spi2-core (2.54.1-r0)
#11 9.679 (128/281) Installing libatk-bridge-2.0 (2.54.1-r0)
#11 9.726 (129/281) Installing avahi-libs (0.8-r19)
#11 9.760 (130/281) Installing gmp (6.3.0-r2)
#11 9.846 (131/281) Installing nettle (3.10-r1)
#11 9.977 (132/281) Installing libidn2 (2.3.7-r0)
#11 10.02 (133/281) Installing libtasn1 (4.20.0-r0)
#11 10.03 (134/281) Installing p11-kit (0.25.5-r2)
#11 10.12 (135/281) Installing gnutls (3.8.8-r0)
#11 10.32 (136/281) Installing cups-libs (2.4.11-r0)
#11 10.42 (137/281) Installing libepoxy (1.5.10-r1)
#11 10.50 (138/281) Installing fribidi (1.0.16-r0)
#11 10.54 (139/281) Installing graphite2 (1.3.14-r6)
#11 10.59 (140/281) Installing harfbuzz (9.0.0-r1)
#11 10.71 (141/281) Installing libxft (2.3.8-r3)
#11 10.73 (142/281) Installing pango (1.54.0-r1)
#11 10.79 (143/281) Installing wayland-libs-client (1.23.1-r0)
#11 10.80 (144/281) Installing wayland-libs-cursor (1.23.1-r0)
#11 10.81 (145/281) Installing wayland-libs-egl (1.23.1-r0)
#11 10.82 (146/281) Installing xkeyboard-config (2.43-r0)
#11 10.97 (147/281) Installing libxkbcommon (1.7.0-r1)
#11 11.04 (148/281) Installing gtk+3.0 (3.24.49-r0)
#11 11.67 (149/281) Installing icu-data-full (74.2-r0)
#11 ...

#13 [prod 4/6] RUN npm ci
#13 2.576 npm warn deprecated rimraf@2.7.1: Rimraf versions prior to v4 are no longer supported
#13 3.377 npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
#13 6.315 npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
#13 10.89 npm error code 1
#13 10.89 npm error path /app/node_modules/canvas
#13 10.89 npm error command failed
#13 10.89 npm error command sh -c prebuild-install -r napi || node-gyp rebuild
#13 10.89 npm error prebuild-install warn install No prebuilt binaries found (target=7 runtime=napi arch=arm64 libc=musl platform=linux)
#13 10.89 npm error gyp info it worked if it ends with ok
#13 10.89 npm error gyp info using node-gyp@10.1.0
#13 10.89 npm error gyp info using node@18.20.8 | linux | arm64
#13 10.89 npm error gyp ERR! find Python 
#13 10.89 npm error gyp ERR! find Python Python is not set from command line or npm configuration
#13 10.89 npm error gyp ERR! find Python Python is not set from environment variable PYTHON
#13 10.89 npm error gyp ERR! find Python checking if "python3" can be used
#13 10.89 npm error gyp ERR! find Python - executable path is ""
#13 10.89 npm error gyp ERR! find Python - "" could not be run
#13 10.89 npm error gyp ERR! find Python checking if "python" can be used
#13 10.89 npm error gyp ERR! find Python - executable path is ""
#13 10.89 npm error gyp ERR! find Python - "" could not be run
#13 10.89 npm error gyp ERR! find Python 
#13 10.89 npm error gyp ERR! find Python **********************************************************
#13 10.89 npm error gyp ERR! find Python You need to install the latest version of Python.
#13 10.89 npm error gyp ERR! find Python Node-gyp should be able to find and use Python. If not,
#13 10.89 npm error gyp ERR! find Python you can try one of the following options:
#13 10.89 npm error gyp ERR! find Python - Use the switch --python="/path/to/pythonexecutable"
#13 10.89 npm error gyp ERR! find Python (accepted by both node-gyp and npm)
#13 10.89 npm error gyp ERR! find Python - Set the environment variable PYTHON
#13 10.89 npm error gyp ERR! find Python - Set the npm configuration variable python:
#13 10.89 npm error gyp ERR! find Python npm config set python "/path/to/pythonexecutable"
#13 10.89 npm error gyp ERR! find Python For more information consult the documentation at:
#13 10.89 npm error gyp ERR! find Python https://github.com/nodejs/node-gyp#installation
#13 10.89 npm error gyp ERR! find Python **********************************************************
#13 10.89 npm error gyp ERR! find Python 
#13 10.89 npm error gyp ERR! configure error 
#13 10.89 npm error gyp ERR! stack Error: Could not find any Python installation to use
#13 10.89 npm error gyp ERR! stack at PythonFinder.fail (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:306:11)
#13 10.89 npm error gyp ERR! stack at PythonFinder.findPython (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:164:17)
#13 10.89 npm error gyp ERR! stack at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
#13 10.89 npm error gyp ERR! stack at async configure (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:27:18)
#13 10.89 npm error gyp ERR! stack at async run (/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js:81:18)
#13 10.89 npm error gyp ERR! System Linux 6.10.14-linuxkit
#13 10.89 npm error gyp ERR! command "/usr/local/bin/node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
#13 10.89 npm error gyp ERR! cwd /app/node_modules/canvas
#13 10.89 npm error gyp ERR! node -v v18.20.8
#13 10.89 npm error gyp ERR! node-gyp -v v10.1.0
#13 10.89 npm error gyp ERR! not ok
#13 10.90 npm notice
#13 10.90 npm notice New major version of npm available! 10.8.2 -> 11.3.0
#13 10.90 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.3.0
#13 10.90 npm notice To update run: npm install -g npm@11.3.0
#13 10.90 npm notice
#13 10.90 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-05-04T20_00_45_442Z-debug-0.log
#13 ERROR: process "/bin/sh -c npm ci" did not complete successfully: exit code: 1

#11 [dev 2/5] RUN apk add --no-cache python3 make g++ pixman-dev cairo-dev pango-dev jpeg-dev giflib-dev librsvg-dev     chromium nss freetype harfbuzz ca-certificates ttf-freefont
#11 13.84 (150/281) Installing llvm19-libs (19.1.4-r1)
#11 CANCELED
------
 > [prod 4/6] RUN npm ci:
10.89 npm error gyp ERR! cwd /app/node_modules/canvas
10.89 npm error gyp ERR! node -v v18.20.8
10.89 npm error gyp ERR! node-gyp -v v10.1.0
10.89 npm error gyp ERR! not ok
10.90 npm notice
10.90 npm notice New major version of npm available! 10.8.2 -> 11.3.0
10.90 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.3.0
10.90 npm notice To update run: npm install -g npm@11.3.0
10.90 npm notice
10.90 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-05-04T20_00_45_442Z-debug-0.log
------
failed to solve: process "/bin/sh -c npm ci" did not complete successfully: exit code: 1
